package Refugees_Management_System;

import java.util.ArrayList;
import java.util.Scanner;

public class CreateAccount {

	private Scanner scanner;

	public CreateAccount(int lastaccid, ArrayList<Account> accounts, Database database) {
		scanner = new Scanner(System.in);

		System.out.println("Create new account");
		System.out.println("Enter First Name:");
		String firstName = scanner.nextLine();

		System.out.println("Enter Last Name:");
		String lastName = scanner.nextLine();

		double balance = 0;
		boolean validBalance = false;
		while (!validBalance) {
			try {
				System.out.println("Enter Balance:");
				balance = Double.parseDouble(scanner.nextLine());
				validBalance = true;
			} catch (NumberFormatException e) {
				System.out.println("Balance must be a number!");
			}
		}

		int passcode = 0;
		boolean validPasscode = false;
		while (!validPasscode) {
			try {
				System.out.println("Enter Passcode (digits):");
				passcode = Integer.parseInt(scanner.nextLine());
				validPasscode = true;
			} catch (NumberFormatException e) {
				System.out.println("Passcode must be digits!");
			}
		}

		System.out.println("Confirm Passcode:");
		int passcode2 = Integer.parseInt(scanner.nextLine());

		if (passcode != passcode2) {
			System.out.println("Passcode not matching");
			return;
		}

		Account acc = new Account(firstName, lastName, lastaccid, balance, passcode);
		accounts.add(acc);
		System.out.println("Your account id: " + lastaccid);
		database.saveAccounts(accounts);
		new Menu(acc, database, accounts);
	}
}
